{% extends 'base.html' %}
{% block title %}{% endblock %}
{% block body %} 
<p class="menu">
    <a href="./">Inicio</a>
</p>
    <form action="/final" method="POST">
        <input id="pagina" name="pagina"
               type="hidden" value="{{ paginaActual }}">
        <input id="titulo" name="titulo"
               type="hidden" value="{{ busquedActual }}">
        
        <table class="tabla u-full-width">
            {% for pelicula in peliculas %}    
                <tr>
                    <td rowspan="2">
                        {% if pelicula["Poster"] == "N/A" %}
                        <img style="max-width: 187px; max-height: 270px"
                             src="http://www.josco.com.au/wp-content/uploads/2016/05/Image-Unavailable.jpg"/>
                        {% else %}
                        <img style="max-width: 187px; max-height: 270px"  
                             src="{{ pelicula["Poster"] }}"
                             onerror="this.src='http://www.josco.com.au/wp-content/uploads/2016/05/Image-Unavailable.jpg';"/>
                        {% endif %}
                    </td>
                    <th>TITULO</th>
                    <td>{{ pelicula["Title"] }}</td>
                    <td rowspan="2"><button name="btnselected"
                        value="{{ pelicula["imdbID"] }}" type="submit"
                        class="miboton  button-primary">Detalle</button></td>
                </tr>
                <tr>
                    <th>AÃ‘O</th>
                    <td>{{ pelicula["Year"] }}</td>
                </tr>
            {% endfor %}
        </table>
    </form>   
        <br/>
        <div style="text-align:center">
            <p class = "marcapaginas_p">Pagina {{ paginaActual }} de {{ totalPaginas }}</p>
            
            {%if paginaActual -2  <= 0 %}
                {%for pagina in range (1,v_minimo +1)%}
                    <form action="/indice" method="POST" class="paginado_li" >
                    <input id="hoja" name="pagina"
                        type="hidden" value="{{ pagina }}"> 
                    <input id="titulo" name="titulo"
                        type="hidden" value="{{ busquedActual }}">
                    <button name="btnselected" value="Select"type="submit"
                            class="paginado_li  button-primary">{{ pagina }}</button>
                </form>
                {% endfor %}
            
            {%elif paginaActual + 3 > totalPaginas %}
            {%for pagina in range (totalPaginas -5,totalPaginas +1)%}
                <form action="/indice" method="POST" class="paginado_li" >
                    <input id="hoja" name="pagina"
                        type="hidden" value="{{ pagina }}"> 
                    <input id="titulo" name="titulo"
                        type="hidden" value="{{ busquedActual }}">
                    <button name="btnselected" value="Select"type="submit"
                            class="paginado_li  button-primary">{{ pagina }}</button>
                </form>
            {% endfor %}
            {%else%}
            {%for pagina in range (paginaActual -2,paginaActual +3)%}
                <form action="/indice" method="POST" class="paginado_li" >
                    <input id="hoja" name="pagina"
                        type="hidden" value="{{ pagina }}"> 
                    <input id="titulo" name="titulo"
                        type="hidden" value="{{ busquedActual }}">
                    <button name="btnselected" value="Select"type="submit"
                            class="paginado_li  button-primary">{{ pagina }}</button>
                    </form>
                {% endfor %}
            {% endif %}
        </div>
    
    <div class="marcaPaginas">
    {% if paginaActual > 1 %}
    <form action="/indice" method="POST">
        <input id="pagina" name="pagina" type="hidden" value="{{ paginaActual - 1 }}">
        <input id="titulo" name="titulo" type="hidden" value="{{ busquedActual }}">
    
        <button name="btnselected" value="Select"
                type="submit" class="anterior  button-primary">ant.</button>
    </form>
    {% endif %}
    
    {% if paginaActual < totalPaginas  %}
    <form action="/indice" method="POST">
        <input id="pagina" name="pagina" type="hidden" value="{{ paginaActual + 1 }}">
        <input id="titulo" name="titulo" type="hidden" value="{{ busquedActual }}">
    
        <button name="btnselected" value="Select"
                type="submit" class="siguiente  button-primary">sig.</button>
    </form>
    {% endif %}
    </div> 
{% endblock %}